var timelineScroll=function(t,e){"use strict";function n(t){return[].concat.apply([],t)}var i=t(window),o={playheadRatio:.5},s=function(n,s,r){this.options=t.extend(!0,o,s),this.$targetElement=t(n),this.sceneCount=0,this.scenes=[],this.startProps=null,this.tl=new TimelineMax,this.onUpdateCallback=r||function(){},this.playheadRatio=this.options.playheadRatio;var a=function(t){return t.$sceneElement.outerHeight()};this.updateTimeline=function(){var t=this.tl,n=this.$targetElement,i=0,o=this.storyHeight();t.clear(),t.set(n,this.startProps),this.scenes.forEach(function(s){var r=s.tweens,u=a(s),h=u/o;r.forEach(function(o){var s=o.tweenDuration*h;o.props.ease=o.props.ease?o.props.ease:Linear.easeNone;var r=i+o.tweenPosition*h;t.add(new e(n,s,o.props),r)}),i=h+i}),t.to(n,0,{},1),t.pause(),this.update()},this.update=function(){var t=this.storyHeight(),e=this.storyTop(),n=i.scrollTop(),o=i.height()*this.playheadRatio,s=n-e+o;s=s<0?0:s;var r=s/t;this.tl.progress(r),this.onUpdateCallback()}};s.prototype.storyHeight=function(){return this.scenes.reduce(function(t,e){return t+e.$sceneElement.outerHeight()},0)},s.prototype.storyTop=function(){var t=this.scenes.map(function(t){return t.$sceneElement.offset().top});return Math.min.apply(null,t)},s.prototype.updateResize=function(){this.updateTimeline()},s.prototype.updateScroll=function(){this.update()},s.prototype.addScene=function(t){if("undefined"==typeof this.storylineBegin)throw new Error("storyline should call start before adding scenes");var e=new a(t,this.sceneCount);return this.scenes.push(e),this.sceneCount++,e},s.prototype.start=function(t){this.startProps=t||{},this.storylineBegin=!0},s.prototype.end=function(){if(!this._cuepointValidation())throw new Error("cuepoints should be monotonically increasing");if(!this._lastTweenValidation())throw new Error("last tween must be less than or equal to 1");this.updateTimeline()},s.prototype._cuepointValidation=function(){var t=this.scenes.reduce(function(t,e){var n=e.timePosition,i=e.tweens.map(function(t){return[].concat([t.from+n,t.to+n])});return[].concat(t,i)},[]),e=n(t),i=e.reduce(function(t,e){return!(t>e)&&(t!==!1&&e)},0);return i!==!1},s.prototype._lastTweenValidation=function(){var t=this.scenes[this.scenes.length-1],e=t.tweens[t.tweens.length-1];return e.to<=1};var r=function(e,n,i){this.from=e,this.to=n,this.tweenPosition=e,this.tweenDuration=n-e,this.props=i,this._baseProps=t.extend(!0,{},i)},a=function(e,n){this.$sceneElement=t(e),this.tweens=[],this.timePosition=n};return a.prototype.addTween=function(t,e,n){return this.tweens.push(new r(t,e,n,this.timePosition)),this},{createStoryline:function(t,e,n){return new s(t,e,n)}}}(jQuery,TweenMax);